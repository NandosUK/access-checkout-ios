I, [2020-03-31T14:51:52.810380 #23868]  INFO -- : Cleared interactions
I, [2020-03-31T14:51:52.816254 #23868]  INFO -- : Registered expected interaction POST /verifiedTokens/sessions
D, [2020-03-31T14:51:52.816753 #23868] DEBUG -- : {
  "description": "a valid request to VT",
  "request": {
    "method": "post",
    "path": "/verifiedTokens/sessions",
    "headers": {
      "content-type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
    },
    "body": {
      "identity": "identity",
      "cardNumber": "4111111111111111",
      "cardExpiryDate": {
        "year": 2099,
        "month": 12
      },
      "cvc": "123"
    }
  },
  "response": {
    "status": 201,
    "headers": {
      "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
    },
    "body": {
      "_links": {
        "verifiedTokens:session": {
          "href": {
            "json_class": "Pact::Term",
            "data": {
              "generate": "http://access.worldpay.com/verifiedTokens/sessions/sampleSessionID",
              "matcher": {
                "json_class": "Regexp",
                "o": 0,
                "s": "https?://[^/]+/verifiedTokens/sessions/.+"
              }
            }
          }
        }
      }
    }
  },
  "metadata": null
}
I, [2020-03-31T14:51:52.826206 #23868]  INFO -- : Received request POST /verifiedTokens/sessions
D, [2020-03-31T14:51:52.826592 #23868] DEBUG -- : {
  "path": "/verifiedTokens/sessions",
  "query": "",
  "method": "post",
  "body": {
    "cardExpiryDate": {
      "month": 12,
      "year": 2099
    },
    "cvc": "123",
    "identity": "identity",
    "cardNumber": "4111111111111111"
  },
  "headers": {
    "Content-Length": "109",
    "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json",
    "Host": "localhost:1234",
    "Connection": "keep-alive",
    "X-Wp-Sdk": "access-checkout-ios/1.2.2",
    "Accept": "*/*",
    "Accept-Language": "en-us",
    "Accept-Encoding": "gzip, deflate",
    "User-Agent": "xctest/15702 CFNetwork/1121.2.1 Darwin/19.3.0",
    "Version": "HTTP/1.1"
  }
}
I, [2020-03-31T14:51:52.827102 #23868]  INFO -- : Found matching response for POST /verifiedTokens/sessions
D, [2020-03-31T14:51:52.827419 #23868] DEBUG -- : {
  "status": 201,
  "headers": {
    "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
  },
  "body": {
    "_links": {
      "verifiedTokens:session": {
        "href": {
          "json_class": "Pact::Term",
          "data": {
            "generate": "http://access.worldpay.com/verifiedTokens/sessions/sampleSessionID",
            "matcher": {
              "json_class": "Regexp",
              "o": 0,
              "s": "https?://[^/]+/verifiedTokens/sessions/.+"
            }
          }
        }
      }
    }
  }
}
I, [2020-03-31T14:51:52.831509 #23868]  INFO -- : Verifying - interactions matched
I, [2020-03-31T14:51:52.835960 #23868]  INFO -- : Writing pact for verified-tokens to /Users/petechitvicheankul/Documents/GitHub/access-checkout-ios/AccessCheckoutSDK/pacts/access-checkout-ios-sdk-verified-tokens.json
I, [2020-03-31T14:51:52.842249 #23868]  INFO -- : Cleared interactions
I, [2020-03-31T14:51:52.846941 #23868]  INFO -- : Registered expected interaction POST /verifiedTokens/sessions
D, [2020-03-31T14:51:52.847518 #23868] DEBUG -- : {
  "description": "a request with an invalid identity to VT",
  "request": {
    "method": "post",
    "path": "/verifiedTokens/sessions",
    "headers": {
      "content-type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
    },
    "body": {
      "cardExpiryDate": {
        "month": 12,
        "year": 2099
      },
      "identity": "incorrectValue",
      "cardNumber": "4111111111111111",
      "cvc": "123"
    }
  },
  "response": {
    "status": 400,
    "headers": {
      "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
    },
    "body": {
      "message": {
        "json_class": "Pact::SomethingLike",
        "contents": "The json body provided does not match the expected schema"
      },
      "errorName": "bodyDoesNotMatchSchema",
      "validationErrors": [
        {
          "jsonPath": "$.identity",
          "message": {
            "json_class": "Pact::SomethingLike",
            "contents": "Identity is invalid"
          },
          "errorName": "fieldHasInvalidValue"
        }
      ]
    }
  },
  "metadata": null
}
I, [2020-03-31T14:51:52.852834 #23868]  INFO -- : Received request POST /verifiedTokens/sessions
D, [2020-03-31T14:51:52.853260 #23868] DEBUG -- : {
  "path": "/verifiedTokens/sessions",
  "query": "",
  "method": "post",
  "body": {
    "cardExpiryDate": {
      "month": 12,
      "year": 2099
    },
    "cvc": "123",
    "identity": "incorrectValue",
    "cardNumber": "4111111111111111"
  },
  "headers": {
    "Content-Length": "115",
    "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json",
    "Host": "localhost:1234",
    "Connection": "keep-alive",
    "X-Wp-Sdk": "access-checkout-ios/1.2.2",
    "Accept": "*/*",
    "Accept-Language": "en-us",
    "Accept-Encoding": "gzip, deflate",
    "User-Agent": "xctest/15702 CFNetwork/1121.2.1 Darwin/19.3.0",
    "Version": "HTTP/1.1"
  }
}
I, [2020-03-31T14:51:52.853647 #23868]  INFO -- : Found matching response for POST /verifiedTokens/sessions
D, [2020-03-31T14:51:52.854087 #23868] DEBUG -- : {
  "status": 400,
  "headers": {
    "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
  },
  "body": {
    "message": {
      "json_class": "Pact::SomethingLike",
      "contents": "The json body provided does not match the expected schema"
    },
    "errorName": "bodyDoesNotMatchSchema",
    "validationErrors": [
      {
        "jsonPath": "$.identity",
        "message": {
          "json_class": "Pact::SomethingLike",
          "contents": "Identity is invalid"
        },
        "errorName": "fieldHasInvalidValue"
      }
    ]
  }
}
I, [2020-03-31T14:51:52.859880 #23868]  INFO -- : Verifying - interactions matched
I, [2020-03-31T14:51:52.863738 #23868]  INFO -- : Writing pact for verified-tokens to /Users/petechitvicheankul/Documents/GitHub/access-checkout-ios/AccessCheckoutSDK/pacts/access-checkout-ios-sdk-verified-tokens.json
I, [2020-03-31T14:51:52.869406 #23868]  INFO -- : Cleared interactions
I, [2020-03-31T14:51:52.873880 #23868]  INFO -- : Registered expected interaction POST /verifiedTokens/sessions
D, [2020-03-31T14:51:52.874392 #23868] DEBUG -- : {
  "description": "a request with a PAN that does not pass Luhn check",
  "request": {
    "method": "post",
    "path": "/verifiedTokens/sessions",
    "headers": {
      "content-type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
    },
    "body": {
      "cvc": "123",
      "identity": "identity",
      "cardExpiryDate": {
        "month": 12,
        "year": 2099
      },
      "cardNumber": "4111111111111110"
    }
  },
  "response": {
    "status": 400,
    "headers": {
      "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
    },
    "body": {
      "validationErrors": [
        {
          "jsonPath": "$.cardNumber",
          "message": {
            "json_class": "Pact::SomethingLike",
            "contents": "The identified field contains a PAN that has failed the Luhn check."
          },
          "errorName": "panFailedLuhnCheck"
        }
      ],
      "errorName": "bodyDoesNotMatchSchema",
      "message": {
        "json_class": "Pact::SomethingLike",
        "contents": "The json body provided does not match the expected schema"
      }
    }
  },
  "metadata": null
}
I, [2020-03-31T14:51:52.878288 #23868]  INFO -- : Received request POST /verifiedTokens/sessions
D, [2020-03-31T14:51:52.878818 #23868] DEBUG -- : {
  "path": "/verifiedTokens/sessions",
  "query": "",
  "method": "post",
  "body": {
    "cardExpiryDate": {
      "month": 12,
      "year": 2099
    },
    "cvc": "123",
    "identity": "identity",
    "cardNumber": "4111111111111110"
  },
  "headers": {
    "Content-Length": "109",
    "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json",
    "Host": "localhost:1234",
    "Connection": "keep-alive",
    "X-Wp-Sdk": "access-checkout-ios/1.2.2",
    "Accept": "*/*",
    "Accept-Language": "en-us",
    "Accept-Encoding": "gzip, deflate",
    "User-Agent": "xctest/15702 CFNetwork/1121.2.1 Darwin/19.3.0",
    "Version": "HTTP/1.1"
  }
}
I, [2020-03-31T14:51:52.879456 #23868]  INFO -- : Found matching response for POST /verifiedTokens/sessions
D, [2020-03-31T14:51:52.879997 #23868] DEBUG -- : {
  "status": 400,
  "headers": {
    "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
  },
  "body": {
    "validationErrors": [
      {
        "jsonPath": "$.cardNumber",
        "message": {
          "json_class": "Pact::SomethingLike",
          "contents": "The identified field contains a PAN that has failed the Luhn check."
        },
        "errorName": "panFailedLuhnCheck"
      }
    ],
    "errorName": "bodyDoesNotMatchSchema",
    "message": {
      "json_class": "Pact::SomethingLike",
      "contents": "The json body provided does not match the expected schema"
    }
  }
}
I, [2020-03-31T14:51:52.884893 #23868]  INFO -- : Verifying - interactions matched
I, [2020-03-31T14:51:52.889474 #23868]  INFO -- : Writing pact for verified-tokens to /Users/petechitvicheankul/Documents/GitHub/access-checkout-ios/AccessCheckoutSDK/pacts/access-checkout-ios-sdk-verified-tokens.json
I, [2020-03-31T14:51:52.895395 #23868]  INFO -- : Cleared interactions
I, [2020-03-31T14:51:52.900700 #23868]  INFO -- : Registered expected interaction POST /verifiedTokens/sessions
D, [2020-03-31T14:51:52.901298 #23868] DEBUG -- : {
  "description": "a request with a month number that is too large",
  "request": {
    "method": "post",
    "path": "/verifiedTokens/sessions",
    "headers": {
      "content-type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
    },
    "body": {
      "identity": "identity",
      "cardExpiryDate": {
        "year": 2099,
        "month": 13
      },
      "cardNumber": "4111111111111111",
      "cvc": "123"
    }
  },
  "response": {
    "status": 400,
    "headers": {
      "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
    },
    "body": {
      "errorName": "bodyDoesNotMatchSchema",
      "validationErrors": [
        {
          "errorName": "integerIsTooLarge",
          "message": {
            "json_class": "Pact::SomethingLike",
            "contents": "Card expiry month is too large - must be between 1 & 12"
          },
          "jsonPath": "$.cardExpiryDate.month"
        }
      ],
      "message": {
        "json_class": "Pact::SomethingLike",
        "contents": "The json body provided does not match the expected schema"
      }
    }
  },
  "metadata": null
}
I, [2020-03-31T14:51:52.907284 #23868]  INFO -- : Received request POST /verifiedTokens/sessions
D, [2020-03-31T14:51:52.908628 #23868] DEBUG -- : {
  "path": "/verifiedTokens/sessions",
  "query": "",
  "method": "post",
  "body": {
    "cardExpiryDate": {
      "month": 13,
      "year": 2099
    },
    "cvc": "123",
    "identity": "identity",
    "cardNumber": "4111111111111111"
  },
  "headers": {
    "Content-Length": "109",
    "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json",
    "Host": "localhost:1234",
    "Connection": "keep-alive",
    "X-Wp-Sdk": "access-checkout-ios/1.2.2",
    "Accept": "*/*",
    "Accept-Language": "en-us",
    "Accept-Encoding": "gzip, deflate",
    "User-Agent": "xctest/15702 CFNetwork/1121.2.1 Darwin/19.3.0",
    "Version": "HTTP/1.1"
  }
}
I, [2020-03-31T14:51:52.909231 #23868]  INFO -- : Found matching response for POST /verifiedTokens/sessions
D, [2020-03-31T14:51:52.909871 #23868] DEBUG -- : {
  "status": 400,
  "headers": {
    "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
  },
  "body": {
    "errorName": "bodyDoesNotMatchSchema",
    "validationErrors": [
      {
        "errorName": "integerIsTooLarge",
        "message": {
          "json_class": "Pact::SomethingLike",
          "contents": "Card expiry month is too large - must be between 1 & 12"
        },
        "jsonPath": "$.cardExpiryDate.month"
      }
    ],
    "message": {
      "json_class": "Pact::SomethingLike",
      "contents": "The json body provided does not match the expected schema"
    }
  }
}
I, [2020-03-31T14:51:52.915195 #23868]  INFO -- : Verifying - interactions matched
I, [2020-03-31T14:51:52.920442 #23868]  INFO -- : Writing pact for verified-tokens to /Users/petechitvicheankul/Documents/GitHub/access-checkout-ios/AccessCheckoutSDK/pacts/access-checkout-ios-sdk-verified-tokens.json
I, [2020-03-31T14:51:52.927396 #23868]  INFO -- : Cleared interactions
I, [2020-03-31T14:51:52.932317 #23868]  INFO -- : Registered expected interaction POST /verifiedTokens/sessions
D, [2020-03-31T14:51:52.932972 #23868] DEBUG -- : {
  "description": "a request with a PAN containing letters",
  "request": {
    "method": "post",
    "path": "/verifiedTokens/sessions",
    "headers": {
      "content-type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
    },
    "body": {
      "cardNumber": "notACardNumber",
      "cvc": "123",
      "identity": "identity",
      "cardExpiryDate": {
        "year": 2099,
        "month": 1
      }
    }
  },
  "response": {
    "status": 400,
    "headers": {
      "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
    },
    "body": {
      "message": {
        "json_class": "Pact::SomethingLike",
        "contents": "The json body provided does not match the expected schema"
      },
      "validationErrors": [
        {
          "jsonPath": "$.cardNumber",
          "message": {
            "json_class": "Pact::SomethingLike",
            "contents": "Card number must be numeric"
          },
          "errorName": "fieldHasInvalidValue"
        }
      ],
      "errorName": "bodyDoesNotMatchSchema"
    }
  },
  "metadata": null
}
I, [2020-03-31T14:51:52.937698 #23868]  INFO -- : Received request POST /verifiedTokens/sessions
D, [2020-03-31T14:51:52.938232 #23868] DEBUG -- : {
  "path": "/verifiedTokens/sessions",
  "query": "",
  "method": "post",
  "body": {
    "cardExpiryDate": {
      "month": 1,
      "year": 2099
    },
    "cvc": "123",
    "identity": "identity",
    "cardNumber": "notACardNumber"
  },
  "headers": {
    "Content-Length": "106",
    "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json",
    "Host": "localhost:1234",
    "Connection": "keep-alive",
    "X-Wp-Sdk": "access-checkout-ios/1.2.2",
    "Accept": "*/*",
    "Accept-Language": "en-us",
    "Accept-Encoding": "gzip, deflate",
    "User-Agent": "xctest/15702 CFNetwork/1121.2.1 Darwin/19.3.0",
    "Version": "HTTP/1.1"
  }
}
I, [2020-03-31T14:51:52.938751 #23868]  INFO -- : Found matching response for POST /verifiedTokens/sessions
D, [2020-03-31T14:51:52.939084 #23868] DEBUG -- : {
  "status": 400,
  "headers": {
    "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
  },
  "body": {
    "message": {
      "json_class": "Pact::SomethingLike",
      "contents": "The json body provided does not match the expected schema"
    },
    "validationErrors": [
      {
        "jsonPath": "$.cardNumber",
        "message": {
          "json_class": "Pact::SomethingLike",
          "contents": "Card number must be numeric"
        },
        "errorName": "fieldHasInvalidValue"
      }
    ],
    "errorName": "bodyDoesNotMatchSchema"
  }
}
I, [2020-03-31T14:51:52.943341 #23868]  INFO -- : Verifying - interactions matched
I, [2020-03-31T14:51:52.947638 #23868]  INFO -- : Writing pact for verified-tokens to /Users/petechitvicheankul/Documents/GitHub/access-checkout-ios/AccessCheckoutSDK/pacts/access-checkout-ios-sdk-verified-tokens.json
I, [2020-03-31T14:51:52.954763 #23868]  INFO -- : Cleared interactions
I, [2020-03-31T14:51:52.960592 #23868]  INFO -- : Registered expected interaction GET /verifiedTokens
D, [2020-03-31T14:51:52.961025 #23868] DEBUG -- : {
  "description": "a GET request to the VT service root",
  "request": {
    "method": "get",
    "path": "/verifiedTokens"
  },
  "response": {
    "status": 200,
    "headers": {
      "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
    },
    "body": {
      "_links": {
        "verifiedTokens:sessions": {
          "href": {
            "json_class": "Pact::Term",
            "data": {
              "generate": "http://access.worldpay.com/verifiedTokens/sessions",
              "matcher": {
                "json_class": "Regexp",
                "o": 0,
                "s": "https?://[^/]+/verifiedTokens/sessions"
              }
            }
          }
        }
      }
    }
  },
  "metadata": null
}
I, [2020-03-31T14:51:52.968017 #23868]  INFO -- : Received request GET /verifiedTokens
D, [2020-03-31T14:51:52.968532 #23868] DEBUG -- : {
  "path": "/verifiedTokens",
  "query": "",
  "method": "get",
  "headers": {
    "Host": "localhost:1234",
    "Accept": "*/*",
    "Accept-Language": "en-us",
    "Connection": "keep-alive",
    "Accept-Encoding": "gzip, deflate",
    "User-Agent": "xctest/15702 CFNetwork/1121.2.1 Darwin/19.3.0",
    "Version": "HTTP/1.1"
  }
}
I, [2020-03-31T14:51:52.969112 #23868]  INFO -- : Found matching response for GET /verifiedTokens
D, [2020-03-31T14:51:52.969588 #23868] DEBUG -- : {
  "status": 200,
  "headers": {
    "Content-Type": "application/vnd.worldpay.verified-tokens-v1.hal+json"
  },
  "body": {
    "_links": {
      "verifiedTokens:sessions": {
        "href": {
          "json_class": "Pact::Term",
          "data": {
            "generate": "http://access.worldpay.com/verifiedTokens/sessions",
            "matcher": {
              "json_class": "Regexp",
              "o": 0,
              "s": "https?://[^/]+/verifiedTokens/sessions"
            }
          }
        }
      }
    }
  }
}
I, [2020-03-31T14:51:52.973710 #23868]  INFO -- : Verifying - interactions matched
I, [2020-03-31T14:51:52.978135 #23868]  INFO -- : Writing pact for verified-tokens to /Users/petechitvicheankul/Documents/GitHub/access-checkout-ios/AccessCheckoutSDK/pacts/access-checkout-ios-sdk-verified-tokens.json
